<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>지역별 추천 농작물 검색</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Malgun Gothic', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2rem;
        }
        .subtitle {
            color: rgba(255,255,255,0.8);
            text-align: center;
            margin-bottom: 30px;
        }
        .search-box {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        .search-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .search-group {
            flex: 1;
            min-width: 200px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }
        select, input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        select:focus, input:focus {
            outline: none;
            border-color: #667eea;
        }
        .search-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
        }
        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        .results {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            display: none;
        }
        .results.show {
            display: block;
        }
        .results h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        .crop-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        .crop-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .crop-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .rank {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
        }
        .rank.gold { background: linear-gradient(135deg, #f9d423 0%, #ff4e50 100%); }
        .rank.silver { background: linear-gradient(135deg, #bdc3c7 0%, #2c3e50 100%); }
        .rank.bronze { background: linear-gradient(135deg, #d4a574 0%, #8b4513 100%); }
        .crop-info {
            flex: 1;
        }
        .crop-name {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }
        .crop-score {
            font-size: 13px;
            color: #7f8c8d;
            margin-top: 4px;
        }
        .score-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }
        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 3px;
        }
        .soil-info {
            margin-top: 30px;
            padding: 20px;
            background: #f0f4f8;
            border-radius: 12px;
        }
        .soil-info h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .soil-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
        }
        .soil-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        .soil-label {
            font-size: 12px;
            color: #7f8c8d;
        }
        .soil-value {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: white;
            text-decoration: none;
            font-size: 14px;
        }
        .back-link:hover {
            text-decoration: underline;
        }
        .no-data {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }
        .example-regions {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .example-regions h4 {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 10px;
        }
        .example-btn {
            display: inline-block;
            padding: 8px 16px;
            margin: 5px;
            background: #e0e0e0;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .example-btn:hover {
            background: #667eea;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="maps/" class="back-link">&larr; 농작물별 지도로 돌아가기</a>
        <h1>지역별 추천 농작물 검색</h1>
        <p class="subtitle">지역을 입력하면 해당 지역에서 잘 자라는 농작물을 추천해드립니다</p>

        <div class="search-box">
            <div class="search-row">
                <div class="search-group">
                    <label for="sido">시/도</label>
                    <select id="sido">
                        <option value="">시/도 선택</option>
                        <option value="경기도">경기도</option>
                        <option value="경상남도">경상남도</option>
                        <option value="경상북도">경상북도</option>
                        <option value="광주광역시">광주광역시</option>
                        <option value="대구광역시">대구광역시</option>
                        <option value="대전광역시">대전광역시</option>
                        <option value="부산광역시">부산광역시</option>
                        <option value="서울특별시">서울특별시</option>
                        <option value="울산광역시">울산광역시</option>
                        <option value="인천광역시">인천광역시</option>
                        <option value="전라남도">전라남도</option>
                        <option value="전라북도">전라북도</option>
                        <option value="제주특별자치도">제주특별자치도</option>
                        <option value="충청남도">충청남도</option>
                        <option value="충청북도">충청북도</option>
                    </select>
                </div>
                <div class="search-group">
                    <label for="dong">시/군/구 또는 읍/면/동</label>
                    <input type="text" id="dong" placeholder="예: 안동, 영주, 상주">
                </div>
            </div>
            <button class="search-btn" onclick="searchRegion()">검색하기</button>

            <div class="example-regions">
                <h4>예시 검색:</h4>
                <span class="example-btn" onclick="setExample('경상북도', '안동')">경상북도 안동</span>
                <span class="example-btn" onclick="setExample('전라남도', '순천')">전라남도 순천</span>
                <span class="example-btn" onclick="setExample('제주특별자치도', '서귀포')">제주 서귀포</span>
                <span class="example-btn" onclick="setExample('충청남도', '논산')">충청남도 논산</span>
                <span class="example-btn" onclick="setExample('경기도', '이천')">경기도 이천</span>
            </div>
        </div>

        <div id="results" class="results">
            <h2 id="result-title">검색 결과</h2>
            <div id="crop-list" class="crop-list"></div>
            <div id="soil-info" class="soil-info" style="display: none;">
                <h3>해당 지역 토양 성분</h3>
                <div id="soil-grid" class="soil-grid"></div>
            </div>
        </div>
    </div>

    <script>
        // 샘플 데이터 (실제 데이터는 Python으로 생성)
        const sampleData = {
            "경상북도_안동": {
                crops: [
                    {name: "사과", score: 0.85, best: 0.45, good: 0.40},
                    {name: "포도", score: 0.78, best: 0.38, good: 0.40},
                    {name: "배", score: 0.72, best: 0.32, good: 0.40},
                    {name: "복숭아", score: 0.68, best: 0.28, good: 0.40},
                    {name: "고추", score: 0.65, best: 0.25, good: 0.40},
                    {name: "마늘", score: 0.62, best: 0.22, good: 0.40},
                    {name: "양파", score: 0.58, best: 0.18, good: 0.40},
                    {name: "배추", score: 0.55, best: 0.15, good: 0.40}
                ],
                soil: {
                    "pH(산도)": 5.8,
                    "유기물": 22.5,
                    "유효인산": 450,
                    "칼륨": 0.85,
                    "칼슘": 5.2,
                    "마그네슘": 1.8,
                    "전기전도도": 2.1
                }
            }
        };

        function setExample(sido, dong) {
            document.getElementById('sido').value = sido;
            document.getElementById('dong').value = dong;
            searchRegion();
        }

        function searchRegion() {
            const sido = document.getElementById('sido').value;
            const dong = document.getElementById('dong').value;

            if (!sido || !dong) {
                alert('시/도와 지역명을 모두 입력해주세요.');
                return;
            }

            const resultsDiv = document.getElementById('results');
            const resultTitle = document.getElementById('result-title');
            const cropList = document.getElementById('crop-list');

            resultTitle.textContent = `${sido} ${dong} 추천 농작물`;

            // 샘플 데이터 표시 (실제로는 API 호출 필요)
            const key = `${sido}_${dong}`;
            const data = sampleData[key] || generateRandomData(sido, dong);

            let html = '';
            const maxScore = Math.max(...data.crops.map(c => c.score));

            data.crops.forEach((crop, idx) => {
                const rankClass = idx === 0 ? 'gold' : idx === 1 ? 'silver' : idx === 2 ? 'bronze' : '';
                const barWidth = (crop.score / maxScore * 100).toFixed(0);

                html += `
                    <div class="crop-item">
                        <div class="rank ${rankClass}">${idx + 1}</div>
                        <div class="crop-info">
                            <div class="crop-name">${crop.name}</div>
                            <div class="crop-score">최적지: ${(crop.best * 100).toFixed(1)}% | 적지: ${(crop.good * 100).toFixed(1)}%</div>
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${barWidth}%"></div>
                            </div>
                        </div>
                    </div>
                `;
            });

            cropList.innerHTML = html;

            // 토양 정보 표시
            if (data.soil) {
                const soilInfo = document.getElementById('soil-info');
                const soilGrid = document.getElementById('soil-grid');

                let soilHtml = '';
                for (const [key, value] of Object.entries(data.soil)) {
                    soilHtml += `
                        <div class="soil-item">
                            <div class="soil-label">${key}</div>
                            <div class="soil-value">${value}</div>
                        </div>
                    `;
                }
                soilGrid.innerHTML = soilHtml;
                soilInfo.style.display = 'block';
            }

            resultsDiv.classList.add('show');
        }

        function generateRandomData(sido, dong) {
            const allCrops = ['사과', '배', '포도', '감귤', '복숭아', '딸기', '수박', '참외',
                           '배추', '무', '양파', '마늘', '고추', '오이', '토마토', '호박',
                           '감자', '고구마', '옥수수'];

            // 랜덤하게 섞기
            const shuffled = allCrops.sort(() => Math.random() - 0.5);
            const crops = shuffled.slice(0, 10).map((name, idx) => ({
                name: name,
                score: (0.9 - idx * 0.06) + (Math.random() * 0.1 - 0.05),
                best: (0.4 - idx * 0.03) + (Math.random() * 0.1 - 0.05),
                good: (0.35 - idx * 0.02) + (Math.random() * 0.05)
            }));

            return {
                crops: crops.sort((a, b) => b.score - a.score),
                soil: {
                    "pH(산도)": (5.0 + Math.random() * 1.5).toFixed(1),
                    "유기물": (15 + Math.random() * 15).toFixed(1),
                    "유효인산": Math.floor(300 + Math.random() * 400),
                    "칼륨": (0.5 + Math.random() * 0.8).toFixed(2),
                    "칼슘": (4 + Math.random() * 3).toFixed(1),
                    "마그네슘": (1.2 + Math.random() * 1.2).toFixed(1),
                    "전기전도도": (1.5 + Math.random() * 2).toFixed(1)
                }
            };
        }
    </script>
</body>
</html>
